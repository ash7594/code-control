<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Code Character</title>

    <link type="text/css" rel="stylesheet" href="assets/css/reset.css">
    <link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/6.1/styles/sunburst.min.css">
    <link type="text/css" rel="stylesheet" href="assets/css/docs.css">
    <link type="text/css" rel="stylesheet" href="assets/css/print.css" media="print">
    

    <script type="text/javascript" src="assets/js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
    <script type="text/javascript" src="assets/js/lunr.min.js"></script>

    

    <script type="text/javascript">var BASE_URL = "";</script>
    <script type="text/javascript" src="assets/js/viewer.js"></script>

    
</head>
<body>
    <div id="page">
        <a name="top" />
        <header id="header">
            <h1><a href="">Code Character</a></h1>
        </header>
        

<div id="sidebar">
    <form action="search.html"><input id="search" type="text" placeholder="Search" name="q" /></form>
    <nav id="toc">
        
    <ol>
    
        <li>
            <a href="intro.html#introduction">Introduction</a>
            
                
    <ol>
    
        <li>
            <a href="intro.html#objective">Objective</a>
            
        </li>
    
        <li>
            <a href="intro.html#scoring">Scoring</a>
            
        </li>
    
        <li>
            <a href="intro.html#language">Language</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="update.html#update">Update</a>
            
                
    <ol>
    
        <li>
            <a href="update.html#return-value">Return Value</a>
            
        </li>
    
        <li>
            <a href="update.html#entity">Entity</a>
            
        </li>
    
        <li>
            <a href="update.html#parameters">Parameters</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="api.html#api">API</a>
            
                
    <ol>
    
        <li>
            <a href="api.html#direction">Direction</a>
            
        </li>
    
        <li>
            <a href="api.html#getatparams-point">getAt(params, point)</a>
            
        </li>
    
        <li>
            <a href="api.html#getdistancepointa-pointb">getDistance(pointA, pointB)</a>
            
        </li>
    
        <li>
            <a href="api.html#getdirectionpointa-pointb">getDirection(pointA, pointB)</a>
            
        </li>
    
        <li>
            <a href="api.html#getentidxparams-idx">getEntIdx(params, idx)</a>
            
        </li>
    
        <li>
            <a href="api.html#gettypeobject">getType(object)</a>
            
        </li>
    
        <li>
            <a href="api.html#getmovepoint-dir">getMove(point, dir)</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="examples.html#examples">Examples</a>
            
                
    <ol>
    
        <li>
            <a href="examples.html#sleepy">Sleepy</a>
            
        </li>
    
        <li>
            <a href="examples.html#jerky">Jerky</a>
            
        </li>
    
        <li>
            <a href="examples.html#seek-and-destroy">Seek and Destroy</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

    </nav>
    
    <nav id="links">
        <ul>
            
        </ul>
    </nav>
    
</div>

        <div id="content">
            <h1 id="update">Update</h1>
<p>The single entry point to all your code. This is the only function that is actually called by the simulation. Controls the <code>action</code> your character takes during that turn. Any <strong>declared</strong> global variables are accessible <em>persistantly</em>. The <code>update</code> function <strong>must</strong> be declared.</p>
<blockquote>
<p>Additional functions -- that are called from <code>update</code> may also be declared.</p>
</blockquote>
<h2 id="return-value">Return Value</h2>
<p>The <code>action</code> your character performs is determined by the <code>Object</code> that your function returns.
The <strong>compulsory</strong> key that your return object must posses is the <code>action</code> key. This key can be any one of,</p>
<h3 id="rest">rest</h3>
<p>Does <em>nothing</em> for that turn.</p>
<pre><code>function update(params) {
    return { action: &#39;rest&#39; }    
}
</code></pre><blockquote>
<p>Any additional keys are ignored</p>
</blockquote>
<h3 id="move">move</h3>
<p>Attempts to move in the particular <a href="">Direction</a>. If the new position is invalid -- out of bounds; or already occupied, the <code>move</code> <em>fails</em>.
This action <strong>requires</strong> an additional <code>dir</code> key which specifies the <a href="">Direction</a> to move in.</p>
<pre><code>function update(params) {
    return {
        action: &#39;move&#39;,
        dir: Direction.U
    }
}
</code></pre><h3 id="attack">attack</h3>
<p>If an entity is present <em>one</em> tile away in the <a href="">Direction</a> <code>dir</code> from the current position. The other character is <code>damaged</code>.</p>
<pre><code>function update(params) {
    return {
        action: &#39;attack&#39;,
        dir: Direction.D
    }
}
</code></pre><h2 id="entity">Entity</h2>
<p>An entity is just a plain old Javascript <code>Object</code> that describes well, an <em>entity</em>. Its keys describe its state. Available keys,</p>
<ul>
<li><em>idx</em>: A unique <code>id</code> that identifies each entity.</li>
<li><em>team</em>: A number that identifies which team the entity belongs to.</li>
<li><em>pos</em>: A <a href="">Point</a> object that describes its position on the grid.</li>
<li><em>health</em>: The remaining health of the entity.</li>
</ul>
<h2 id="parameters">Parameters</h2>
<p>Your <code>update</code> function is supplied with a bunch of parameters that specify the current game state. All of these parameters are encapsualted into a single <code>params</code> object. All parameters are accesible via the <em>keys</em> of this object.</p>
<h3 id="params-self">params.self</h3>
<p>An <code>entity</code> object that describes the <strong>character that is being updated</strong>.</p>
<h3 id="params-map">params.map</h3>
<p>A one dimensional <code>Array</code> that represents the entire <em>game grid</em> at the current instant. The API provides a utility <a href="">getAt</a> function to help seeking using traditional <code>i</code>, <code>j</code> indexing.</p>
<blockquote>
<p>Modifying these parameters <em>doesn&#39;t</em> change the game state. You can <em>only</em> affect the state by <em>returning</em> an <code>action</code> and update your character.</p>
</blockquote>
<h3 id="params-entities">params.entities</h3>
<p>An <code>Array</code> of all the <em>entities</em> currently present on the map.</p>




        </div>
        <footer id="footer">
            Powered by <a href="http://github.com/maximebf/beautiful-docs">beautiful-docs</a> -
            <a href="#top">Back to top</a> - <a href="all.html">Everything on a single page</a>
            - <a href="?print=1">Print current page</a> - <a href="all.html?print=1">Print all pages</a>
            
        </footer>
    </div>
</body>
</html>
